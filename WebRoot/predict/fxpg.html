#@predict()
#define predict_main()

<div class="container-content">
    <!-- common search -->
    <div class="sd_company_container">
        <div class="sd_form_search" style="height:50px">
           <p style="text-align:center; font-size:30px">企业风险等级评估</p>
        </div>
    </div>

    <div class="sd_company_container" style="margin-top: 20px;">
        <div class="sd_cent">
            <div class="sd_cent">
                <div class="sd_left_block">
                    <!-- <div class="sd_left_block_tit"  style="color:green">
                        <b>企业风险等级评估</b>
                    </div> -->
                    <ul id="myTab" class="nav nav-tabs">    
    						<li><a href="#financial" data-toggle="tab">财务风险评估</a></li>
    						<li><a href="#business" data-toggle="tab">经营风险评估</a></li>
    						<li><a href="#tec" data-toggle="tab">技术风险评估</a></li>
    						<li><a href="#strategy" data-toggle="tab">战略风险评估</a></li>  
    						<li><a href="#all" data-toggle="tab">综合风险评估</a></li>  
				    </ul>
                    <div class="or_left_silde" id="searchCondition" style="height: 550px">                       
                         <div id="myTabContent" class="tab-content"  style="height: 500px">
                        	<div class="tab-pane fade in active" id="financial">
                    			<div class="row">
  									<div class="col-xs-6">表单输入</div>
  									<div class="col-xs-6">结果可视化</div>
								</div>
               			    </div>                        
                        	<div class="tab-pane fade" id="business">
                    			<div class="row">                    			
  									<div class="col-xs-6"  style="border-right:2px">
  									<div class="page-header">
  										 <small style="font-size:15px">经营风险指标输入</small> 										 
									</div>
									<form class="form-horizontal" role="form" id="credit" name="form1" method="POST" onsubmit="return false" >
	                               		<div class="form-group">
		                                  	<label for="firstname" class="col-sm-4 control-label">诉讼数量(个)</label>
		                              		<div class="col-sm-8">
                                         		<input type="text" name="creditQualityBean.debt_rate" class="form-control" id="firstname" placeholder="请输入诉讼数">
                                        	</div>
	                               		</div>
	                               		<div class="form-group">
		                                  	<label for="firstname" class="col-sm-4 control-label">经营异常次数</label>
		                              		<div class="col-sm-8">
                                         		<input type="text" name="creditQualityBean.debt_rate" class="form-control" id="firstname" placeholder="请输入经营异常数">
                                        	</div>
	                               		</div>
	                               		<div class="form-group">
		                                  	<label for="firstname" class="col-sm-4 control-label">行政处罚次数</label>
		                              		<div class="col-sm-8">
                                         		<input type="text" name="creditQualityBean.debt_rate" class="form-control" id="firstname" placeholder="请输入行政处罚数">
                                        	</div>
	                               		</div>
	                               		<div class="form-group">
		                                  	<label for="firstname" class="col-sm-4 control-label">动产质押次数</label>
		                              		<div class="col-sm-8">
                                         		<input type="text" name="creditQualityBean.debt_rate" class="form-control" id="firstname" placeholder="请输入动产质押数">
                                        	</div>
	                               		</div>
	                               		<div class="form-group">
		                                  	<label for="firstname" class="col-sm-4 control-label">自身风险</label>
		                              		<div class="col-sm-8">
                                         		<input type="text" name="creditQualityBean.debt_rate" class="form-control" id="firstname" placeholder="请输入自身风险数">
                                        	</div>
	                               		</div>
	                               		<div class="form-group">
		                                  	<label for="firstname" class="col-sm-4 control-label">周边风险</label>
		                              		<div class="col-sm-8">
                                         		<input type="text" name="creditQualityBean.debt_rate" class="form-control" id="firstname" placeholder="请输入周边风险数">
                                        	</div>
	                               		</div>
	                               		<div class="form-group">
		                                  	<label for="firstname" class="col-sm-4 control-label">股东数量（注册）</label>
		                              		<div class="col-sm-8">
                                         		<input type="text" name="creditQualityBean.debt_rate" class="form-control" id="firstname" placeholder="请输入股东数">
                                        	</div>
	                               		</div>
	                               		<div class="form-group">
		                                  	<label for="firstname" class="col-sm-4 control-label">第一大股东持股比例（注册）</label>
		                              		<div class="col-sm-8">
                                         		<input type="text" name="creditQualityBean.debt_rate" class="form-control" id="firstname" placeholder="请输入第一大股东持股比例数">
                                        	</div>
	                               		</div>
	                               	<div class="form-group">
                                        <div class="col-sm-offset-5 col-sm-10">
                                            <button type="submit" id="btn"  class="btn btn-default">开始评估</button>
                                        </div>
                                    </div>
	                               	</form> 							  									 									 									
  									</div>
  									<div class="col-xs-6">
  									<div class="page-header">
  										 <small style="font-size:15px">结果分析与可视化</small> 										 
									</div>
  									
  									
  									
  									
  									</div>
								</div>
               			    </div>                       
                        	<div class="tab-pane fade" id="tec">
                    			<div class="row">                    			
  									<div class="col-xs-6"  style="border-right:2px">
  									<div class="page-header">
  										 <small style="font-size:15px">技术风险指标输入</small> 										 
									</div>
									<form class="form-horizontal" role="form" id="credit" name="form1" method="POST" onsubmit="return false" >
	                               		<div class="form-group">
		                                  	<label for="firstname" class="col-sm-4 control-label">专利数量(个)</label>
		                              		<div class="col-sm-8">
                                         		<input type="text" name="creditQualityBean.debt_rate" class="form-control" id="firstname" placeholder="请输入专利数">
                                        	</div>
	                               		</div>
	                               		<div class="form-group">
		                                  	<label for="firstname" class="col-sm-4 control-label">软件著作权数量 (个)</label>
		                              		<div class="col-sm-8">
                                         		<input type="text" name="creditQualityBean.debt_rate" class="form-control" id="firstname" placeholder="请输入软件著作权数">
                                        	</div>
	                               		</div>
	                               		<div class="form-group">
		                                  	<label for="firstname" class="col-sm-4 control-label">作品著作权数量 (个)</label>
		                              		<div class="col-sm-8">
                                         		<input type="text" name="creditQualityBean.debt_rate" class="form-control" id="firstname" placeholder="请输入作品著作权数">
                                        	</div>
	                               		</div>
	                               	<div class="form-group">
                                        <div class="col-sm-offset-5 col-sm-10">
                                            <button type="submit" id="btn"  class="btn btn-default">开始评估</button>
                                        </div>
                                    </div>
	                               	</form> 							  									 									 									
  									</div>
  									<div class="col-xs-6">
  									<div class="page-header">
  										 <small style="font-size:15px">技术风险分析可视化</small> 										 
									</div>
  									
  									
  									
  									
  									</div>
								</div>
               			    </div>                    
                        	<div class="tab-pane fade" id="strategy">
                    			<div class="row">                    			
  									<div class="col-xs-6"  style="border-right:2px">
  									<div class="page-header">
  										 <small style="font-size:15px">战略风险指标输入</small> 										 
									</div>
									<form class="form-horizontal" role="form" id="credit" name="form1" method="POST" onsubmit="return false" >
	                               		<div class="form-group">
		                                  	<label for="firstname" class="col-sm-4 control-label">竞品信息数量(个)</label>
		                              		<div class="col-sm-8">
                                         		<input type="text" name="creditQualityBean.debt_rate" class="form-control" id="firstname" placeholder="请输入竞品数">
                                        	</div>
	                               		</div>
	                               		<div class="form-group">
		                                  	<label for="firstname" class="col-sm-4 control-label">公众号数量 (个)</label>
		                              		<div class="col-sm-8">
                                         		<input type="text" name="creditQualityBean.debt_rate" class="form-control" id="firstname" placeholder="请输入公众号数">
                                        	</div>
	                               		</div>
	                               		<div class="form-group">
		                                  	<label for="firstname" class="col-sm-4 control-label">对外投资数量 (个)</label>
		                              		<div class="col-sm-8">
                                         		<input type="text" name="creditQualityBean.debt_rate" class="form-control" id="firstname" placeholder="请输入对外投资数">
                                        	</div>
	                               		</div>
	                               	<div class="form-group">
                                        <div class="col-sm-offset-5 col-sm-10">
                                            <button type="submit" id="btn"  class="btn btn-default">开始评估</button>
                                        </div>
                                    </div>
	                               	</form> 							  									 									 									
  									</div>
  									<div class="col-xs-6">
  									<div class="page-header">
  										 <small style="font-size:15px">战略风险分析可视化</small> 										 
									</div>
  									
  									
  									
  									
  									</div>
								</div>
               			      </div>
               			      <div class="tab-pane fade" id="all">
                    			<div class="row">
  									
  									<div class="col-xs-1">结果可视化</div>
								</div>
               			    </div>  
                        </div>
                   </div>
                   
                   
                   
                   
                </div>                               
                 <!-- <div class="sd_left_block">
                    <div class="sd_left_block_tit" style="color:green">
                        <b>结果及分析</b>
                       
                    </div>
                    <div class="or_left_silde" id="searchCondition" style="height: 300px">
                    
                    <div class="or_category" >
                          <p>输出结果及结果说明</p>
                     </div>
                   </div>
                </div> -->
            </div>
        
        </div>
    </div>
</div>
#end

<script>
    var detailFrame = new DetailFrame();
    detailFrame.init();
    var search = new Shuidi.PCSearch();
    search.init();
</script>
<!-- 行业动态数据异步加载请求 -->
<script>

//Echarts接口调用及数据处理
(function(){
	var pie3 = echarts.init(document.getElementById("pie3"));
	/* pie3.showLoading({
     text: "图表数据正在努力加载..."
 }); */
 option = {
		    title: {
		        text: '房地产行业财务分析',
		        left: '50%',
		        textAlign: 'center'
		    },
		    tooltip: {
		        trigger: 'axis',
		        axisPointer: {
		            lineStyle: {
		                color: '#000'
		            }
		        },
		        backgroundColor: 'rgba(255,255,255,1)',
		        padding: [5, 10],
		        textStyle: {
		            color: '#7588E4',
		        },
		        extraCssText: 'box-shadow: 0 0 5px rgba(0,0,0,0.3)'
		    },
		    legend: {
		        left:"20",
		        //orient: 'ver',
		        data: ['盈利能力','偿债能力','经营效率','增长潜力']
		    },
		    xAxis: {
		        type: 'category',
		        name:'年份',
		        data: [],
		        boundaryGap: false,
		        splitLine: {
		            show: true,
		            interval: 'auto',
		            lineStyle: {
		                color: ['#D4DFF5']
		            }
		        },
		        axisTick: {
		            show: false
		        },
		        axisLine: {
		            lineStyle: {
		                color: '#609ee9'
		            }
		        },
		        axisLabel: {
		            margin: 10,
		            textStyle: {
		                fontSize: 18
		            }
		        }
		    },
		    yAxis: {
		        type: 'value',
		        name:'指数',
		        splitLine: {
		            lineStyle: {
		                color: ['#D4DFF5']
		            }
		        },
		        axisTick: {
		            show: false
		        },
		        axisLine: {
		            lineStyle: {
		                color: '#609ee9'
		            }
		        },
		        axisLabel: {
		            margin: 10,
		            
		            textStyle: {
		                fontSize: 14
		            }
		        }
		    },
		    series: [
            {
		        name: '盈利能力',
		        type: 'line',
		        smooth: true,
		        show:true,
		        showSymbol: false,
		        symbol: 'circle',
		        symbolSize: 2,
		        data: [],
		        
		        itemStyle: {
		            normal: {
		                color: '#f7b851'
		            }
		        },
		        lineStyle: {
		            normal: {
		                width: 2
		            }
		        }
		    }, {
		        name: '偿债能力',
		        type: 'line',
		        smooth: true,
		        showSymbol: false,
		        symbol: 'circle',
		        symbolSize: 2,
		        data: [],
		        
		        itemStyle: {
		            normal: {
		                color: '#58c8da'
		            }
		        },
		        lineStyle: {
		            normal: {
		                width: 2
		            }
		        }
		    }
            , {
                name: '经营效率',
                type: 'line',
                smooth: true,
                showSymbol: false,
                symbol: 'circle',
                symbolSize: 2,
                data: [],
                
                itemStyle: {
                    normal: {
                        color: '#d14a61'
                    }
                },
                lineStyle: {
                    normal: {
                        width: 2
                    }
                }
            }
            , {
                name: '增长潜力',
                type: 'line',
                smooth: true,
                showSymbol: false,
                symbol: 'circle',
                symbolSize: 2,
                data: [],
                
                itemStyle: {
                    normal: {
                        color: '#5793f3'
                    }
                },
                lineStyle: {
                    normal: {
                        width: 2
                    }
                }
            }

            ]
		};

pie3.showLoading();    //数据加载完之前先显示一段简单的loading动画

//ajax异步请求数据
var profit   = [];   //盈利能力
var debt     = [];     //偿债能力
var manager  = [];  //经营效率
var increase = []; //增长潜力
var years    = []; //横坐标：年份
$.ajax({
    "url": "./marketData",      //路径
    "cache": false,              //不缓存
    "async": true ,               //默认true即异步（优先选择）
    "type": "GET",              //POST方式提交
    "dataType": "json",          //json格式，重要
    "contentType": "application/json",      //json格式                            
    success: function (data) { //成功同步请求数据      	
        //请求成功时执行该函数内容，result即为服务器返回的json对象
        $.each(data, function(index,item) {
            profit.push(item['盈利能力']);
            debt.push(item['偿债能力']);
            manager.push(item['经营效率']);
            increase.push(item['增长潜力']);
            years.push(item['id']);
            //console.log(item['id']);
        });     
        
        pie3.hideLoading();    //隐藏加载动画
        pie3.setOption({        //加载数据图表                
            dataZoom: [{
            type: 'inside',
            start: 0,
            end: 50
        }, {
            show: true,
            type: 'slider',
            y: '90%',
            start: 0,
            end: 50
        }],
            xAxis: {
                data: years
            },
            series: [{
                name: "盈利能力",  data: profit
            }, {
                name: "偿债能力",  data: debt
            }, {
                name: "经营效率",  data: manager
            }, {
                name: "增长潜力",  data: increase
            }]
        });
    },
    error: function (errorMsg) {
        //请求失败时执行该函数
        alert("图表请求数据失败!");
        pie3.hideLoading();
    }
}); 

pie3.setOption(option);
})();

</script>


