#@predict()
#define predict_main()
<div class="container-content">
    <!-- common search -->
    <div class="sd_company_container">
        <div class="sd_form_search">
           <p style="text-align:center; font-size:30px;padding-top: : 30px">行业动态预测分布 </p>
        </div>
    </div>

    <div class="sd_company_container" style="margin-top: 20px;">
        <div class="sd_cent">
            <div class="sd_cent">
                <div class="sd_left_block">
                   <ul id="myTab" class="nav nav-tabs">
    <li class="active">
        <a href="#home" data-toggle="tab">财务风险预警</a>
    </li>
    <li><a href="#market" data-toggle="tab">市场风险预警</a></li>
    <li><a href="#invest" data-toggle="tab">区域投资潜力</a></li>
    <li class="dropdown">
        <a href="#" id="myTabDrop1" class="dropdown-toggle" 
           data-toggle="dropdown">景气分析 
            <b class="caret"></b>
        </a>
        <ul class="dropdown-menu" role="menu" aria-labelledby="myTabDrop1">
            <li><a href="#hecheng" tabindex="-1" data-toggle="tab">合成指数</a></li>
            <li><a href="#kuosan" tabindex="-1" data-toggle="tab">扩散指数</a></li>
        </ul>
    </li>
</ul>
        <div class="or_left_silde" id="searchCondition">                      
            <div id="myTabContent" class="tab-content"  style="height: 500px">
                <div class="tab-pane fade in active" id="home">
                    <div class="or_category">
                        <div id="pie3" style="width: 100%;height: 400px;"></div>
                    </div> 
                </div>
                <div class="tab-pane fade" id="market">
                    <p>市场预警</p>
                </div>
                <div class="tab-pane fade" id="invest">
                   <div class="or_category">
                        <div id="main" style="width: 1100px;height: 400px;"></div>
                    </div> 
                </div>
                <div class="tab-pane fade" id="hecheng">
                    <div id="pie4" style="width: 1100px;height: 400px;"></div>
                </div>
                <div class="tab-pane fade" id="kuosan">
                     <div id="pie5" style="width: 1100px;height: 400px;"></div>
                </div>
            </div>
        </div>
                </div>                               
                 <div class="sd_left_block">
                    <div class="sd_left_block_tit">
                        <b>结果及分析</b>
                       
                    </div>
                    <div class="or_left_silde" id="searchCondition" style="height: 300px">
                    
                    <div class="or_category">
                          <p>输出结果及结果说明</p>
                          
                          
                          
                    </div>
                     
                         
                     </div>
                </div>
              <!-- <div class="sd_left_block">
                  
             </div> -->
            </div>
        
        </div>
    </div>
</div>
#end

<script>
    var detailFrame = new DetailFrame();
    detailFrame.init();
    var search = new Shuidi.PCSearch();
    search.init();
</script>
<!-- 行业动态数据异步加载请求：财务预警 -->
<script>

//Echarts接口调用及数据处理
(function(){
	var pie3 = echarts.init(document.getElementById("pie3"));
	/* pie3.showLoading({
     text: "图表数据正在努力加载..."
 }); */
 option = {
		    title: {
		        text: '房地产行业财务分析',
		        left: '50%',
		        textAlign: 'center'
		    },
		    tooltip: {
		        trigger: 'axis',
		        axisPointer: {
		            lineStyle: {
		                color: '#000'
		            }
		        },
		        backgroundColor: 'rgba(255,255,255,1)',
		        padding: [5, 10],
		        textStyle: {
		            color: '#7588E4',
		        },
		        extraCssText: 'box-shadow: 0 0 5px rgba(0,0,0,0.3)'
		    },
		    legend: {
		        left:"20",
		        //orient: 'ver',
		        data: ['盈利能力','偿债能力','经营效率','增长潜力']
		    },
		    xAxis: {
		        type: 'category',
		        name:'年份',
		        data: [],
		        boundaryGap: false,
		        splitLine: {
		            show: true,
		            interval: 'auto',
		            lineStyle: {
		                color: ['#D4DFF5']
		            }
		        },
		        axisTick: {
		            show: false
		        },
		        axisLine: {
		            lineStyle: {
		                color: '#609ee9'
		            }
		        },
		        axisLabel: {
		            margin: 10,
		            textStyle: {
		                fontSize: 18
		            }
		        }
		    },
		    yAxis: {
		        type: 'value',
		        name:'指数',
		        splitLine: {
		            lineStyle: {
		                color: ['#D4DFF5']
		            }
		        },
		        axisTick: {
		            show: false
		        },
		        axisLine: {
		            lineStyle: {
		                color: '#609ee9'
		            }
		        },
		        axisLabel: {
		            margin: 10,
		            
		            textStyle: {
		                fontSize: 14
		            }
		        }
		    },
		    series: [
            {
		        name: '盈利能力',
		        type: 'line',
		        smooth: true,
		        show:true,
		        showSymbol: false,
		        symbol: 'circle',
		        symbolSize: 2,
		        data: [],
		        
		        itemStyle: {
		            normal: {
		                color: '#f7b851'
		            }
		        },
		        lineStyle: {
		            normal: {
		                width: 2
		            }
		        }
		    }, {
		        name: '偿债能力',
		        type: 'line',
		        smooth: true,
		        showSymbol: false,
		        symbol: 'circle',
		        symbolSize: 2,
		        data: [],
		        
		        itemStyle: {
		            normal: {
		                color: '#58c8da'
		            }
		        },
		        lineStyle: {
		            normal: {
		                width: 2
		            }
		        }
		    }
            , {
                name: '经营效率',
                type: 'line',
                smooth: true,
                showSymbol: false,
                symbol: 'circle',
                symbolSize: 2,
                data: [],
                
                itemStyle: {
                    normal: {
                        color: '#d14a61'
                    }
                },
                lineStyle: {
                    normal: {
                        width: 2
                    }
                }
            }
            , {
                name: '增长潜力',
                type: 'line',
                smooth: true,
                showSymbol: false,
                symbol: 'circle',
                symbolSize: 2,
                data: [],
                
                itemStyle: {
                    normal: {
                        color: '#5793f3'
                    }
                },
                lineStyle: {
                    normal: {
                        width: 2
                    }
                }
            }

            ]
		};

pie3.showLoading();    //数据加载完之前先显示一段简单的loading动画

//ajax异步请求数据
var profit   = [];   //盈利能力
var debt     = [];     //偿债能力
var manager  = [];  //经营效率
var increase = []; //增长潜力
var years    = []; //横坐标：年份
$.ajax({
    "url": "./marketData",      //路径
    "cache": false,              //不缓存
    "async": true ,               //默认true即异步（优先选择）
    "type": "GET",              //POST方式提交
    "dataType": "json",          //json格式，重要
    "contentType": "application/json",      //json格式                            
    success: function (data) { //成功同步请求数据      	
        //请求成功时执行该函数内容，result即为服务器返回的json对象
        $.each(data, function(index,item) {
            profit.push(item['盈利能力']);
            debt.push(item['偿债能力']);
            manager.push(item['经营效率']);
            increase.push(item['增长潜力']);
            years.push(item['id']);
            //console.log(item['id']);
        });     
        
        pie3.hideLoading();    //隐藏加载动画
        pie3.setOption({        //加载数据图表                
            dataZoom: [{
            type: 'inside',
            start: 0,
            end: 60
        }, {
            show: true,
            type: 'slider',
            y: '90%',
            start: 0,
            end: 50
        }],
            xAxis: {
                data: years
            },
            series: [{
                name: "盈利能力",  data: profit
            }, {
                name: "偿债能力",  data: debt
            }, {
                name: "经营效率",  data: manager
            }, {
                name: "增长潜力",  data: increase
            }]
        });
    },
    error: function (errorMsg) {
        //请求失败时执行该函数
        alert("图表请求数据失败!");
        pie3.hideLoading();
    }
}); 

pie3.setOption(option);
})();

//区域投资潜力

    (function () {
        // 基于准备好的dom，初始化echarts图表
        var myChart = echarts.init(document.getElementById('main')); 
       
                     
        option = {
                title : {
                    text: '房地产投资潜力指数分布图',
                    subtext: '七大区域',
                    x:'center'
                },
                tooltip : {
                    trigger: 'item'
                },
                legend: {
                    orient: 'vertical',
                    x:'left',
                    data:['市场供需因子','经济因子','区位因子','人口因子']
                },
                dataRange: {
                    min: 0,
                    max: 2500,
                    x: 'left',
                    y: 'bottom',
                    text:['高','低'],           // 文本，默认为数值文本
                    calculable : true
                },
                toolbox: {
                    show: true,
                    orient : 'vertical',
                    x: 'right',
                    y: 'center',
                    feature : {
                        mark : {show: true},
                        dataView : {show: true, readOnly: false},
                        restore : {show: true},
                        saveAsImage : {show: true}
                    }
                },
                roamController: {
                    show: true,
                    x: 'right',
                    mapTypeControl: {
                        'china': true
                    }
                },
                series : [
                    {
                        name: '市场供需因子',
                        type: 'map',
                        mapType: 'china',
                        roam: false,
                        itemStyle:{
                            normal:{label:{show:true}},
                            emphasis:{label:{show:true}}
                        },
                        data:[
                            {name: '北京',value: Math.round(Math.random()*1000)},
                            {name: '天津',value: Math.round(Math.random()*1000)},
                            {name: '上海',value: Math.round(Math.random()*1000)},
                            {name: '重庆',value: Math.round(Math.random()*1000)},
                            {name: '河北',value: Math.round(Math.random()*1000)},
                            {name: '河南',value: Math.round(Math.random()*1000)},
                            {name: '云南',value: Math.round(Math.random()*1000)},
                            {name: '辽宁',value: Math.round(Math.random()*1000)},
                            {name: '黑龙江',value: Math.round(Math.random()*1000)},
                            {name: '湖南',value: Math.round(Math.random()*1000)},
                            {name: '安徽',value: Math.round(Math.random()*1000)},
                            {name: '山东',value: Math.round(Math.random()*1000)},
                            {name: '新疆',value: Math.round(Math.random()*1000)},
                            {name: '江苏',value: Math.round(Math.random()*1000)},
                            {name: '浙江',value: Math.round(Math.random()*1000)},
                            {name: '江西',value: Math.round(Math.random()*1000)},
                            {name: '湖北',value: Math.round(Math.random()*1000)},
                            {name: '广西',value: Math.round(Math.random()*1000)},
                            {name: '甘肃',value: Math.round(Math.random()*1000)},
                            {name: '山西',value: Math.round(Math.random()*1000)},
                            {name: '内蒙古',value: Math.round(Math.random()*1000)},
                            {name: '陕西',value: Math.round(Math.random()*1000)},
                            {name: '吉林',value: Math.round(Math.random()*1000)},
                            {name: '福建',value: Math.round(Math.random()*1000)},
                            {name: '贵州',value: Math.round(Math.random()*1000)},
                            {name: '广东',value: Math.round(Math.random()*1000)},
                            {name: '青海',value: Math.round(Math.random()*1000)},
                            {name: '西藏',value: Math.round(Math.random()*1000)},
                            {name: '四川',value: Math.round(Math.random()*1000)},
                            {name: '宁夏',value: Math.round(Math.random()*1000)},
                            {name: '海南',value: Math.round(Math.random()*1000)},
                            {name: '台湾',value: Math.round(Math.random()*1000)},
                            {name: '香港',value: Math.round(Math.random()*1000)},
                            {name: '澳门',value: Math.round(Math.random()*1000)}
                        ]
                    },
                    {
                        name: '经济因子',
                        type: 'map',
                        mapType: 'china',
                        itemStyle:{
                            normal:{label:{show:true}},
                            emphasis:{label:{show:true}}
                        },
                        data:[
                            {name: '北京',value: Math.round(Math.random()*1000)},
                            {name: '天津',value: Math.round(Math.random()*1000)},
                            {name: '上海',value: Math.round(Math.random()*1000)},
                            {name: '重庆',value: Math.round(Math.random()*1000)},
                            {name: '河北',value: Math.round(Math.random()*1000)},
                            {name: '安徽',value: Math.round(Math.random()*1000)},
                            {name: '新疆',value: Math.round(Math.random()*1000)},
                            {name: '浙江',value: Math.round(Math.random()*1000)},
                            {name: '江西',value: Math.round(Math.random()*1000)},
                            {name: '山西',value: Math.round(Math.random()*1000)},
                            {name: '内蒙古',value: Math.round(Math.random()*1000)},
                            {name: '吉林',value: Math.round(Math.random()*1000)},
                            {name: '福建',value: Math.round(Math.random()*1000)},
                            {name: '广东',value: Math.round(Math.random()*1000)},
                            {name: '西藏',value: Math.round(Math.random()*1000)},
                            {name: '四川',value: Math.round(Math.random()*1000)},
                            {name: '宁夏',value: Math.round(Math.random()*1000)},
                            {name: '香港',value: Math.round(Math.random()*1000)},
                            {name: '澳门',value: Math.round(Math.random()*1000)}
                        ]
                    },
                    {
                        name: '区位因子',
                        type: 'map',
                        mapType: 'china',
                        itemStyle:{
                            normal:{label:{show:true}},
                            emphasis:{label:{show:true}}
                        },
                        data:[
                            {name: '北京',value: Math.round(Math.random()*1000)},
                            {name: '天津',value: Math.round(Math.random()*1000)},
                            {name: '上海',value: Math.round(Math.random()*1000)},
                            {name: '广东',value: Math.round(Math.random()*1000)},
                            {name: '台湾',value: Math.round(Math.random()*1000)},
                            {name: '香港',value: Math.round(Math.random()*1000)},
                            {name: '澳门',value: Math.round(Math.random()*1000)}
                        ]
                    },
            {
            name: '人口因子',
            type: 'map',
            mapType: 'china',
            itemStyle:{
                normal:{label:{show:true}},
                emphasis:{label:{show:true}}
            },
            data:[
                {name: '北京',value: Math.round(Math.random()*1000)},
                {name: '天津',value: Math.round(Math.random()*1000)},
                {name: '上海',value: Math.round(Math.random()*1000)},
                {name: '广东',value: Math.round(Math.random()*1000)},
                {name: '台湾',value: Math.round(Math.random()*1000)},
                {name: '香港',value: Math.round(Math.random()*1000)},
                {name: '澳门',value: Math.round(Math.random()*1000)}
            ]
        }
    ]
};                                
 myChart.setOption(option, true);
})();
               


//合成指数异步加载
(function(){
    var pie4 = echarts.init(document.getElementById("pie4"));
    /* pie3.showLoading({
     text: "图表数据正在努力加载..."
 }); */
 option = {
            title: {
                text: '市场景气-合成指数',
                left: '50%',
                textAlign: 'center'
            },
            tooltip: {
                trigger: 'axis',
                axisPointer: {
                    lineStyle: {
                        color: '#000'
                    }
                },
                backgroundColor: 'rgba(255,255,255,1)',
                padding: [5, 10],
                textStyle: {
                    color: '#7588E4',
                },
                extraCssText: 'box-shadow: 0 0 5px rgba(0,0,0,0.3)'
            },
            legend: {
                left:"20",
                //orient: 'ver',
                data: ['领先指数','同步指数','滞后指数','HPY']
            },
            xAxis: {
                type: 'category',
                name:'时间',
                data: [],
                boundaryGap: false,
                splitLine: {
                    show: true,
                    interval: 'auto',
                    lineStyle: {
                        color: ['#D4DFF5']
                    }
                },
                axisTick: {
                    show: false
                },
                axisLine: {
                    lineStyle: {
                        color: '#609ee9'
                    }
                },
                axisLabel: {
                    margin: 10,
                    rotate: 90,
                    interval:0,
                    textStyle: {
                        fontSize: 18
                    }
                }
            },
            yAxis: [{
                type: 'value',
                name:'合成指数',
                max: '104',
                min:'95',
                splitLine: {
                    lineStyle: {
                        color: ['#D4DFF5']
                    }
                },
                axisTick: {
                    show: false
                },
                axisLine: {
                    lineStyle: {
                        color: '#609ee9'
                    }
                },
                axisLabel: {
                    margin: 10,
                    
                    textStyle: {
                        fontSize: 14
                    }
                }
            },{
                type: 'value',
                name:'房价指数',
                max: '125',
                min:'95',
                splitLine: {
                    lineStyle: {
                        color: ['#D4DFF5']
                    }
                },
                axisTick: {
                    show: false
                },
                axisLine: {
                    lineStyle: {
                        color: '#609ee9'
                    }
                },
                axisLabel: {
                    margin: 10,
                    
                    textStyle: {
                        fontSize: 14
                    }
                }
            }],
            series: [
            {
                name: '领先指数',
                type: 'line',
                smooth: true,
                show:true,
                showSymbol: false,
                symbol: 'circle',
                symbolSize: 2,
                data: [],
                
                itemStyle: {
                    normal: {
                        color: '#f7b851'
                    }
                },
                lineStyle: {
                    normal: {
                        width: 2
                    }
                }
            }, {
                name: '同步指数',
                type: 'line',
                smooth: true,
                showSymbol: false,
                symbol: 'circle',
                symbolSize: 2,
                data: [],
                
                itemStyle: {
                    normal: {
                        color: '#58c8da'
                    }
                },
                lineStyle: {
                    normal: {
                        width: 2
                    }
                }
            }
            , {
                name: '滞后指数',
                type: 'line',
                smooth:false, 
                showSymbol: false,
                symbol: 'circle',
                symbolSize: 2,
                data: [],
                
                itemStyle: {
                    normal: {
                        color: '#d14a61'
                    }
                },
                lineStyle: {
                    normal: {
                        width: 2
                    }
                }
            }
            , {
                name: 'HPY',
                type: 'line',
                smooth: false, //实现变虚线设置为false，默认为true
               // showSymbol: false,
                symbol: 'circle',
                symbolSize: 2,
                yAxisIndex: 1, //指代第二条y轴
                data: [],
                markLine: {
                    data: [{
                        type: 'average',
                        name: '平均值'
                    }]
                },
                itemStyle: {
                    normal: {
                        color: '#5793f3',
                        lineStyle: {                            
                               width:3,
                               type:'dotted'  //'dotted'虚线 'solid'实线
                       }
                    }
                },
               
            }

            ]
        };

pie4.showLoading();    //数据加载完之前先显示一段简单的loading动画

//ajax异步请求数据
var lead_index       = [];   //领先指数
var coincident_index = [];   //同步指数
var lag_index        = [];  //滞后指数
var hpy              = []; //HPY
var years            = []; //横坐标：年份
$.ajax({
    "url": "./getCI",      //路径
    "cache": false,              //不缓存
    "async": true ,               //默认true即异步（优先选择）
    "type": "GET",              //POST方式提交
    "dataType": "json",          //json格式，重要
    "contentType": "application/json",      //json格式                            
    success: function (data) { //成功同步请求数据       
        //请求成功时执行该函数内容，result即为服务器返回的json对象
        $.each(data, function(index,item) {
            lead_index.push(item['领先指数']);
            coincident_index.push(item['同步指数']);
            lag_index.push(item['滞后指数']);
            hpy.push(item['HPY']);
            years.push(item['id']);
            //console.log(item['id']);
        });     
        
        pie4.hideLoading();    //隐藏加载动画
        pie4.setOption({        //加载数据图表                
            dataZoom: [{
            type: 'inside',
            start: 0,
            end: 60
        }, {
            show: true,
            type: 'slider',
            y: '90%',
            start: 0,
            end: 50
        }],
            xAxis: {
                data: years
            },
            series: [{
                name: "领先指数",  data: lead_index
            }, {
                name: "同步指数",  data: coincident_index
            }, {
                name: "滞后指数",  data: lag_index
            }, {
                name: "HPY",  data: hpy
            }]
        });
    },
    error: function (errorMsg) {
        //请求失败时执行该函数
        alert("图表请求数据失败!");
        pie4.hideLoading();
    }
}); 

pie4.setOption(option);
})();


//扩散指数
(function(){
    var pie5 = echarts.init(document.getElementById("pie5"));
    /* pie3.showLoading({
     text: "图表数据正在努力加载..."
 }); */
 option = {
            title: {
                text: '市场景气-扩散指数',
                left: '50%',
                textAlign: 'center'
            },
            tooltip: {
                trigger: 'axis',
                axisPointer: {
                    lineStyle: {
                        color: '#000'
                    }
                },
                backgroundColor: 'rgba(255,255,255,1)',
                padding: [5, 10],
                textStyle: {
                    color: '#7588E4',
                },
                extraCssText: 'box-shadow: 0 0 5px rgba(0,0,0,0.3)'
            },
            legend: {
                left:"20",
                //orient: 'ver',
                data: ['领先指数','同步指数','滞后指数']
            },
            xAxis: {
                type: 'category',
                name:'时间',
                data: [],
                boundaryGap: false,
                splitLine: {
                    show: true,
                    interval: 'auto',
                    lineStyle: {
                        color: ['#D4DFF5']
                    }
                },
                axisTick: {
                    show: false
                },
                axisLine: {
                    lineStyle: {
                        color: '#609ee9'
                    }
                },
                axisLabel: {
                    margin: 10,
                    rotate: 90,
                    interval:0,
                    textStyle: {
                        fontSize: 18
                    }
                }
            },
            yAxis: {
                type: 'value',
                name:'扩散指数',
                max: '100',
                min:'-10',
                splitLine: {
                    lineStyle: {
                        color: ['#D4DFF5']
                    }
                },
                axisTick: {
                    show: false
                },
                axisLine: {
                    lineStyle: {
                        color: '#609ee9'
                    }
                },
                axisLabel: {
                    margin: 10,
                    
                    textStyle: {
                        fontSize: 14
                    }
                }
            },
            series: [
            {
                name: '领先指数',
                type: 'line',
                smooth: true,
                show:true,
                showSymbol: false,
                symbol: 'circle',
                symbolSize: 2,
                data: [],
                
                itemStyle: {
                    normal: {
                        color: '#f7b851'
                    }
                },
                lineStyle: {
                    normal: {
                        width: 2
                    }
                }
            }, {
                name: '同步指数',
                type: 'line',
                smooth: true,
                showSymbol: false,
                symbol: 'circle',
                symbolSize: 2,
                data: [],
                
                itemStyle: {
                    normal: {
                        color: '#58c8da'
                    }
                },
                lineStyle: {
                    normal: {
                        width: 2
                    }
                }
            }
            , {
                name: '滞后指数',
                type: 'line',
                smooth:false, 
                showSymbol: false,
                symbol: 'circle',
                symbolSize: 2,
                data: [],
                
                itemStyle: {
                    normal: {
                        color: '#d14a61'
                    }
                },
                lineStyle: {
                    normal: {
                        width: 2
                    }
                }
            }]
        };

pie5.showLoading();    //数据加载完之前先显示一段简单的loading动画

//ajax异步请求数据
var lead_index       = [];   //领先指数
var coincident_index = [];   //同步指数
var lag_index        = [];  //滞后指数
var years            = []; //横坐标：年份
$.ajax({
    "url": "./getDiffIndex",      //路径
    "cache": false,              //不缓存
    "async": true ,               //默认true即异步（优先选择）
    "type": "GET",              //POST方式提交
    "dataType": "json",          //json格式，重要
    "contentType": "application/json",      //json格式                            
    success: function (data) { //成功同步请求数据       
        //请求成功时执行该函数内容，result即为服务器返回的json对象
        $.each(data, function(index,item) {
            lead_index.push(item['领先指数']);
            coincident_index.push(item['同步指数']);
            lag_index.push(item['滞后指数']);
            years.push(item['id']);
            //console.log(item['id']);
        });     
        
        pie5.hideLoading();    //隐藏加载动画
        pie5.setOption({        //加载数据图表                
            dataZoom: [{
            type: 'inside',
            start: 0,
            end: 60
        }, {
            show: true,
            type: 'slider',
            y: '90%',
            start: 0,
            end: 50
        }],
            xAxis: {
                data: years
            },
            series: [{
                name: "领先指数",  data: lead_index
            }, {
                name: "同步指数",  data: coincident_index
            }, {
                name: "滞后指数",  data: lag_index
            }]
        });
    },
    error: function (errorMsg) {
        //请求失败时执行该函数
        alert("图表请求数据失败!");
        pie5.hideLoading();
    }
}); 

pie5.setOption(option);
})();
</script>


