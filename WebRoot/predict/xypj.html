#@predict()
#define predict_main()

<div class="container-content">
    <!-- common search -->
    <div class="sd_company_container">
        <div class="sd_form_search" style="height: 10px;">
           <p style="text-align:center; font-size:30px">企业综合信用评级</p>
        </div>
    </div>

    <div class="sd_company_container" style="margin-top: 20px;">
        <div class="sd_cent">
            <div class="sd_cent">
                <div class="sd_left_block">
                    <div class="sd_left_block_tit" style="color:green">
                        <b>评级企业相关指标输入</b>
                    </div>
                    <div class="or_left_silde" id="searchCondition" style="height: 420px">
                        <div class="or_category">
							<form class="form-horizontal" role="form" id="credit" name="form1" method="POST" onsubmit="return false" >
	                               <div class="form-group">
		                                  <label for="firstname" class="col-sm-2 control-label">资产负债率（%）</label>
		                              <div class="col-sm-10">
                                         <input type="text" name="creditQualityBean.debt_rate" class="form-control" id="firstname" 
                                            placeholder="请输入资产负债率（%）">
                                        </div>
	                               </div>
                                   <div class="form-group">
                                           <label for="lastname" class="col-sm-2 control-label">EBITDA利息数（倍）</label>
                                        <div class="col-sm-10">
                                            <input type="text" name="creditQualityBean.interest" class="form-control" id="lastname" 
                                            placeholder="请输入EBITDA利息数（倍）">
                                        </div>
                                   </div>
                                   <div class="form-group">
                                           <label for="lastname" class="col-sm-2 control-label">存货周转次数（次）</label>
                                        <div class="col-sm-10">
                                            <input type="text" name="creditQualityBean.inventoryTurn" class="form-control" id="lastname" 
                                            placeholder="请输入存货周转次数（次）">
                                        </div>
                                   </div>
                                   <div class="form-group">
                                           <label for="lastname" class="col-sm-2 control-label">现金流动负债比率或EBITDA（%）</label>
                                        <div class="col-sm-10">
                                            <input type="text" name="creditQualityBean.flowDebt" class="form-control" id="lastname" 
                                            placeholder="请输入现金流动负债比率或EBITDA（%）">
                                        </div>
                                   </div>
                                   <div class="form-group">
                                           <label for="lastname" class="col-sm-2 control-label">成本费用利润率（%）</label>
                                        <div class="col-sm-10">
                                            <input type="text" name="creditQualityBean.cost" class="form-control" id="lastname" 
                                            placeholder="请输入成本费用利润率（%）">
                                        </div>
                                   </div>
                                   <div class="form-group">
                                           <label for="lastname" class="col-sm-2 control-label">所有者权益合计（万元）</label>
                                        <div class="col-sm-10">
                                            <input type="text" name="creditQualityBean.ownerEquity" class="form-control" id="lastname" 
                                            placeholder="请输入所有者权益合计（万元）">
                                        </div>
                                   </div>
                        <!--            <div class="form-group">
                                           <label for="lastname" class="col-sm-2 control-label">公司信用量化等级</label>
                                        <div class="col-sm-10">
                                            <input type="text" name="creditNum" class="form-control" id="lastname" 
                                            placeholder="请输入公司信用量化等级">
                                        </div>
                                   </div> -->
	                               <div class="form-group">
                                        <div class="col-sm-offset-2 col-sm-10">
                                            <button type="submit" id="btn"  class="btn btn-default">开始分析</button>
                                        </div>
                                    </div>
                            </form>	
                        </div>
                   </div>
                </div>                               
                 <div class="sd_left_block">
                    <div class="sd_left_block_tit" style="color:green">
                        <b>结果及分析</b>
                       
                    </div>
                    <div class="or_left_silde" id="searchCondition" style="height: 300px">                   
                     <div class="or_category" style="text-align:center" id="loading"></div>
                     <p id="msg"></p> 
                         
                     </div>
                </div>
            </div>
        
        </div>
    </div>
</div>
#end

<!-- 信用评级算法Ajax处理0410 -->
<script>
$('#btn').click(function(){
	//防止用户未填写完整数据提交
	for(var i=0;i<document.form1.elements.length-1;i++)
    {
     if(document.form1.elements[i].value=="")
     {
       alert("请填写完整数据信息！");
       document.form1.elements[i].focus();
       return false;
     }
 }
	//表单提交数据序列化
	var credit_data =  $('#credit').serialize();	
	 $.ajax({
	        cache:true,//保留缓存数据
	        type:"POST",//为post请求
	        url:"./creditQuality",//请求后台方法并接受模型返回数据
	        data:credit_data,//将该表单序列化
	        //async: false,
	        error:function(request){//请求失败之后的操作
	            return;
	        },
	        beforeSend:function(XMLHttpRequest){
	        	$("#msg").empty(); //加载前先清空结果信息
	            $("#loading").html("<img src='../static/home/predict/images/loading.gif' />数据分析中……"); //在后台返回success之前显示loading图标  
	          },  
	        success:function(data){
	        	//成功接收后台返回数据进行其他处理操作
	        	$("#loading").empty(); //清除加载数据
	        	var data = data.lst[0];
	        	console.log(data);
	        	var guidInfo = "";
	        	if(data==1){
	        		guidInfo = "财务数据显示企业具有高效的运营效率，优秀的盈利能力以及偿债能力，保持行业内良好的增长率，企业信用极好，纳税信用等级B+以上。";
	        	}else if(data==2){
	        		
	        		guidInfo = "财务数据显示企业具有良好的运营效率，良好的盈利能力以及偿债能力，保持行业内较好的增长率，企业信用良好，纳税信用等级B+以上。";
	        	}else if(data==3){
	        		guidInfo = "财务数据显示企业具有一般的运营效率，一般的盈利能力以及偿债能力，保持行业内正常或稍低的增长率，企业信用一般，纳税信用等级C+以上。";
	        	}else{
	        		guidInfo = "财务数据显示企业的运营效率低于行业平均水平，盈利能力以及偿债能力较差，企业信用差，纳税信用等级C以下。";
	        	}
	        	$("#msg").html("您查询企业的综合信用等级为：【"+data+"】级.<br>"+guidInfo);
	        }
	        
	 
	 });
});


</script>


